(this.webpackJsonpreactjs=this.webpackJsonpreactjs||[]).push([[0],{21:function(e,t,a){e.exports=a(43)},26:function(e,t,a){},27:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(17),o=a.n(r),l=(a(26),a(20)),s=a(8),i=a(45),h=a(44),u=a(18),m=a(19),g=(a(27),a(7)),f=a.n(g),p=a(6),d=a.n(p);function k(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),r=a[0],o=a[1];return Object(n.useEffect)((function(){if(d.a.get("expiry_date")){console.log("exp=".concat(parseInt(d.a.get("expiry_date"))," now=").concat(Date.now())),console.log("time remaining=".concat((parseInt(d.a.get("expiry_date"))-Date.now())/1e3)),parseInt(d.a.get("expiry_date"))<Date.now()&&(console.log("refreshing bc expired token"),window.location.assign("http://localhost:3000/refresh?"+f.a.stringify({refresh_token:d.a.get("refresh_token")})));var e=f.a.stringify({access_token:d.a.get("access_token")});fetch("http://localhost:3000/me?"+e).then((function(e){return e.json()})).then((function(e){console.log("accessing /me, result=".concat(JSON.stringify(e,null,2))),o(e.display_name)})),console.log("access_token=".concat(d.a.get("access_token")))}}),[]),c.a.createElement("div",null,c.a.createElement(i.a,{onClick:function(){return window.location.assign("http://localhost:3000/login")}},"login to access playlists"),c.a.createElement(i.a,{onClick:function(){return window.location.assign("http://localhost:3000/refresh?"+f.a.stringify({refresh_token:d.a.get("refresh_token")}))}},"refresh token"),r&&c.a.createElement("p",null,"logged in as ",r))}function E(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2);a[0],a[1];return c.a.createElement("div",null,c.a.createElement("h1",null,"--Recommender--"))}var w=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],o=a[1],g=Object(n.useState)({search:"",searchArtists:!1,searchTracks:!1,selectedTrack:""}),p=Object(s.a)(g,2),w=p[0],y=p[1];Object(n.useEffect)((function(){}),[]);var v=function(e){var t=Object(l.a)({},w);switch(e.target.type){case"checkbox":t[e.target.name]=e.target.checked;break;default:t[e.target.name]=e.target.value}y(t),console.log("changed ".concat(e.target.name," to \n       ").concat("  "==e.target.type?e.target.checked:e.target.value))};return c.a.createElement("div",null,c.a.createElement("p",null,"document.cookie=",document.cookie),c.a.createElement("p",null,"time remaining=",(parseInt(d.a.get("expiry_date"))-Date.now())/1e3),w.searchArtists?c.a.createElement("iframe",{src:"https://open.spotify.com/embed/track/0MiZuvQDXtd9lGAxZa8Syi",width:"300",height:"80",frameborder:"0",allowtransparency:"true",allow:"encrypted-media"}):"",c.a.createElement("p",null,"player"),c.a.createElement(i.a,{onClick:function(){return window.history.replaceState({},document.title,"/test")}},"test button"),c.a.createElement(i.a,{onClick:function(){return window.location.reload()}},"refresh page"),c.a.createElement(k,null),c.a.createElement("div",null,"p"),c.a.createElement(h.a,null,c.a.createElement(u.a,{controlId:"search"},c.a.createElement(m.a,{placeholder:"search spotify",name:"search",onChange:v})),c.a.createElement(h.a.Check,{name:"searchArtists",label:"artists",value:w.searchArtists,onChange:v}),c.a.createElement(h.a.Check,{name:"searchTracks",label:"tracks",value:w.searchTracks,onChange:v})),c.a.createElement(i.a,{onClick:function(){var e=[];w.searchArtists&&e.push("artist"),w.searchTracks&&e.push("track");var t=f.a.stringify({q:w.search,type:e.join(",")});fetch("http://localhost:3000/search?"+t).then((function(e){return e.json()})).then((function(e){console.log(JSON.stringify(e,null,2)),o(e.artists.items.map((function(e){return c.a.createElement("div",null,c.a.createElement("a",{href:e.external_urls.spotify},e.name),c.a.createElement("div",null,e.images.length&&c.a.createElement("img",{src:e.images[2].url,width:"200",height:"200"})))}))),e.artists.items.forEach((function(e){return console.log(e.images.length&&e.images[0].url)})),console.log("called search")}))},disabled:!w.searchArtists&&!w.searchTracks},"search"),c.a.createElement("h2",null,"search results ",r.length?"for: ".concat(w.search):""),c.a.createElement("div",null,r),c.a.createElement(E,null),c.a.createElement(i.a,{onClick:function(){fetch("http://localhost:3000/top").then((function(e){return e.json()})).then((function(e){console.log("top")})).catch()}},"top playlists"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.145f82c3.chunk.js.map